<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>php</title>
</head>
<body>
<div class="div1">11111111111</div>

<script>
    /*window.onload=function(){     //Test内存没有释放掉

        function Test(Dom)
        {
            this.Dom=Dom;
            this.str='';
            var self = this;
            this.Dom.addEventListener('click', function () {
                self.str='123';
                console.log(self.str)
            }, false);
        }

        var div1=document.getElementsByClassName('div1')[0];
        console.log(div1)
        var myTest=new Test(div1);

    }*/


    window.onload=function() {

        function Test(Dom) {
            this.Dom = Dom;
            this.str = '';
            var self = this;
            this.A = function () {
                this.str = '123';
                console.log(123)
            }
            this.Dom.addEventListener('click', self.A, false);
        }

        Test.prototype.destroy = function () {     //上面有对象的引用，但现在释放掉了，所有没有占用系统内存
            var self=this;
            this.dom.removeEventListener('click',self.A, false);
        }
        var div1 = document.getElementsByClassName('div1')[0];
        var myTest = new Test(div1);
    }


</script>



</body>
</html>